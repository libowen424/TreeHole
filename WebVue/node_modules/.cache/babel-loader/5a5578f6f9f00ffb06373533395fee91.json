{"remainingRequest":"B:\\WebApp\\WebVue\\node_modules\\babel-loader\\lib\\index.js!B:\\WebApp\\WebVue\\src\\services\\userService.js","dependencies":[{"path":"B:\\WebApp\\WebVue\\src\\services\\userService.js","mtime":1591238445281},{"path":"B:\\WebApp\\WebVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"B:\\WebApp\\WebVue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkI6L1dlYkFwcC9XZWJWdWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOyAvL+i+heWKqeeahGRlbGF55Ye95pWwIOW7tuWQjuaWueS+v+afpeeciwoKZnVuY3Rpb24gZGVsYXkoZHVyYXRpb24pIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICByZXNvbHZlKCk7CiAgICB9LCBkdXJhdGlvbik7CiAgfSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBsb2dpbihfeCkgewogIHJldHVybiBfbG9naW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSAvLyDkvb/nlKjkv53lrZjnmoTku6TniYzku47mnI3liqHlmajmjaLlj5bnmbvlvZXkv6Hmga8KCmZ1bmN0aW9uIF9sb2dpbigpIHsKICBfbG9naW4gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUobG9naW5JbmZvKSB7CiAgICB2YXIgcmVzcDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBkZWxheSgyMDAwKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiL2FwaS91c2VyL2xvZ2luIiwgbG9naW5JbmZvKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXNwLmRhdGEpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CiAgcmV0dXJuIF9sb2dpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpleHBvcnQgZnVuY3Rpb24gd2hvQW1JKCkgewogIHJldHVybiBfd2hvQW1JLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0gLy8g5rOo6ZSACgpmdW5jdGlvbiBfd2hvQW1JKCkgewogIF93aG9BbUkgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgdmFyIHRva2VuLCByZXNwOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gZGVsYXkoMjAwMCk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwoKICAgICAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgbnVsbCk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoIi9hcGkvdXNlci93aG9hbWkiLCB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogImJlYXJlciAiLmNvbmNhdCh0b2tlbikKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzcC5kYXRhLmRhdGEpOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKICByZXR1cm4gX3dob0FtSS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpleHBvcnQgZnVuY3Rpb24gbG9naW5PdXQoKSB7CiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInRva2VuIik7Cn0gLy8g5rOo5YaMCi8vdXNlckluZm86ICAge0xvZ2luSWQsTG9naW5Qd2QsTmlja25hbWV9CgpleHBvcnQgZnVuY3Rpb24gcmVnKF94MikgewogIHJldHVybiBfcmVnLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9yZWcoKSB7CiAgX3JlZyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTModXNlckluZm8pIHsKICAgIHZhciByZXNwOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiL2FwaS91c2VyL3JlZyIsIHVzZXJJbmZvKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgY29uc29sZS5sb2coIui/memHjCIpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHJlc3ApOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMpOwogIH0pKTsKICByZXR1cm4gX3JlZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9"},{"version":3,"sources":["B:/WebApp/WebVue/src/services/userService.js"],"names":["axios","delay","duration","Promise","resolve","setTimeout","login","loginInfo","post","resp","data","whoAmI","token","localStorage","getItem","get","headers","authorization","loginOut","removeItem","reg","userInfo","console","log"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;;AACA,SAASC,KAAT,CAAeC,QAAf,EAAyB;AACvB,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9BC,IAAAA,UAAU,CAAC,YAAM;AACfD,MAAAA,OAAO;AACR,KAFS,EAEPF,QAFO,CAAV;AAGD,GAJM,CAAP;AAKD;;AAED,gBAAsBI,KAAtB;AAAA;AAAA,C,CAYA;;;mEAZO,iBAAqBC,SAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACCN,KAAK,CAAC,IAAD,CADN;;AAAA;AAAA;AAAA,mBAGYD,KAAK,CAACQ,IAAN,CAAW,iBAAX,EAA8BD,SAA9B,CAHZ;;AAAA;AAGDE,YAAAA,IAHC;AAAA,6CASEA,IAAI,CAACC,IATP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAaP,gBAAsBC,MAAtB;AAAA;AAAA,C,CAgBA;;;oEAhBO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAGCV,KAAK,CAAC,IAAD,CAHN;;AAAA;AAIDW,YAAAA,KAJC,GAIOC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAJP;;AAAA,gBAKAF,KALA;AAAA;AAAA;AAAA;;AAAA,8CAMI,IANJ;;AAAA;AAAA;AAAA,mBAQYZ,KAAK,CAACe,GAAN,CAAU,kBAAV,EAA8B;AAC7CC,cAAAA,OAAO,EAAE;AACPC,gBAAAA,aAAa,mBAAYL,KAAZ;AADN;AADoC,aAA9B,CARZ;;AAAA;AAQDH,YAAAA,IARC;AAAA,8CAaEA,IAAI,CAACC,IAAL,CAAUA,IAbZ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAiBP,OAAO,SAASQ,QAAT,GAAoB;AACzBL,EAAAA,YAAY,CAACM,UAAb,CAAwB,OAAxB;AACD,C,CAED;AACA;;AACA,gBAAsBC,GAAtB;AAAA;AAAA;;;iEAAO,kBAAmBC,QAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEYrB,KAAK,CAACQ,IAAN,CAAW,eAAX,EAA4Ba,QAA5B,CAFZ;;AAAA;AAEDZ,YAAAA,IAFC;AAGLa,YAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACAD,YAAAA,OAAO,CAACC,GAAR,CAAYd,IAAZ;AAJK,8CAKEA,IALF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import axios from \"axios\";\n\n//辅助的delay函数 延后方便查看\nfunction delay(duration) {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve();\n    }, duration);\n  });\n}\n\nexport async function login(loginInfo) {\n  await delay(2000);\n  // post http://study.yuanjin.tech/api/user/login\n  var resp = await axios.post(\"/api/user/login\", loginInfo);\n  // var token = resp.headers.authorization; // 拿到服务器的令牌\n  // if (token) {\n  //   // 把令牌保存下来\n  //   localStorage.setItem(\"token\", token);\n  // }\n  return resp.data;\n}\n\n// 使用保存的令牌从服务器换取登录信息\nexport async function whoAmI() {\n  // get http://study.yuanjin.tech/api/user/whoami\n  // authorization: bearer tokenxxxxx\n  await delay(2000);\n  var token = localStorage.getItem(\"token\");\n  if (!token) {\n    return null;\n  }\n  var resp = await axios.get(\"/api/user/whoami\", {\n    headers: {\n      authorization: `bearer ${token}`,\n    },\n  });\n  return resp.data.data;\n}\n\n// 注销\nexport function loginOut() {\n  localStorage.removeItem(\"token\");\n}\n\n// 注册\n//userInfo:   {LoginId,LoginPwd,Nickname}\nexport async function reg(userInfo) {\n  // post http://localhost:5000/api/user/reg\n  var resp = await axios.post(\"/api/user/reg\", userInfo);\n  console.log(\"这里\");\n  console.log(resp);\n  return resp;\n}\n"]}]}